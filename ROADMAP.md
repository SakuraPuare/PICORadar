# PICO Radar: 开发路线图

本文档旨在通过分解项目为不同的阶段和关键里程碑，来跟踪PICO Radar项目的开发进度。

-   [x] 已完成
-   [ ] 待办
-   **>** 进行中

---

### 阶段 0：规划与奠基 (已完成)

*   [x] 敲定项目需求与范围。
*   [x] 定义系统架构与技术选型。
*   [x] 设计通讯协议与数据结构。
*   [x] 建立开发准则与工程标准。
*   [x] 创建作为项目章程的 `README.md`。
*   [x] 创建此 `ROADMAP.md` 文件。

---

### 阶段 1：项目设置与核心协议 (已完成)

*   [x] 根据 `README.md` 的定义创建项目目录结构。
*   [x] 初始化项目的 `CMakeLists.txt` 文件。
*   [x] **技术栈变更**: 依赖库从 `websocketpp` (FetchContent) 迁移至 `Boost.Beast` (vcpkg)。
*   [x] 设置依赖管理器 (vcpkg) 并获取 `protobuf`, `gtest`, `boost-beast`, `glog` 库。
*   [x] 实现 `proto/player_data.proto` 文件。
*   [x] 编写脚本将 `.proto` 文件编译为C++代码，并集成到构建流程中。
*   [x] 创建 `server_app` 可执行程序的初始框架。

---

### 阶段 2：服务端实现 (已完成)

*   [x] 实现用于管理玩家状态列表（增、删、改）的 `core` 核心逻辑。
*   [x] 配置并集成 GoogleTest 测试框架，为 `core` 模块编写单元测试。
*   [x] 使用 `Boost.Beast` 实现核心的WebSocket服务器逻辑（监听、接受连接）。
*   [x] 集成 `glog` 日志库，替换所有原生 `cout` 输出。
*   [x] 实现基于预共享令牌的鉴权机制。
*   [x] 实现完整的数据处理与广播循环（接收 -> 解析 -> 更新 -> 广播）。
*   [x] 实现用于处理断连的超时/心跳机制（通过WebSocket的内置功能）。
*   [x] 实现UDP服务发现协议的服务端逻辑。
*   [x] 开发一个基础的命令行界面（CLI）来监控服务器状态（如在线玩家数）。

---

### 阶段 3：客户端与模拟 (已完成)

*   [x] 开发 `mock_client` 测试程序，并用其驱动服务端功能的完善。
*   [x] `mock_client` 能够连接到服务器。
*   [x] `mock_client` 能够按时发送模拟的位置数据。
*   [x] `mock_client` 能够接收并打印从服务器广播的数据。
*   [x] `mock_client` 能够实现UDP服务发现。
*   [x] 创建 `client_lib` 静态库的初始框架。
*   [x] 在 `client_lib` 中实现WebSocket连接逻辑。
*   [x] 在 `client_lib` 中实现客户端的鉴权逻辑。
*   [x] 在 `client_lib` 中实现UDP服务发现逻辑。
*   [x] **客户端库重构**: 将客户端库重构为完全异步的模式，以解决阻塞和竞态条件问题。

---

### 阶段 4：测试、优化与文档 (已完成)

*   [x] **测试与构建系统重构**:
    *   [x] 将所有基于Shell脚本的测试 (`.sh`) 迁移到由GoogleTest驱动的C++集成测试。
    *   [x] 实现了一个用于管理子进程的`Process`辅助类。
    *   [x] 将服务端和模拟客户端重构为生命周期可控的、可被测试直接调用的库。
    *   [x] 实现了完全在进程内运行的集成测试（认证、广播、发现），显著提升了测试速度和可靠性。
    *   [x] **CMake 重构**: 统一了所有测试目标的GTest依赖和链接配置，创建了共享的`gtest_main_obj`对象库，简化了测试的创建和维护。
*   [ ] 对服务器进行压力测试。
*   [ ] 在 `client_lib` 中实现视觉平滑算法（插值）。
*   [ ] 执行并撰写正式的性能基准测试，创建 `PERFORMANCE.md`。
*   [ ] 撰写详细的 `DESIGN.md` 和 `USER_GUIDE.md`。
*   [ ] 使用 Doxygen 生成 `API_REFERENCE.md`。

---

> ### 阶段 5：Unity/Unreal Engine 插件开发 (进行中)
>
> *   [ ] 基于C++客户端库，开发Unity插件。
> *   [ ] 开发Unreal Engine插件。
> *   [ ] 插件需要提供蓝图/C#接口，方便在游戏引擎中调用。
> *   [ ] 实现玩家虚拟形象的显示和更新。

---

### 阶段 6：部署

*   [ ] 将服务端程序打包为Windows和Linux应用。
*   [ ] 提供一个集成了 `client_lib` 的Unreal Engine示例项目。
*   [ ] 对所有文档进行最终审校。
*   [ ] **项目完成。**

---

-   [x] **集成测试 (Integration Tests)**
    -   [x] 实现一个模拟客户端 (`mock_client`)
    -   [x] 测试客户端连接与鉴权流程
    -   [x] 测试数据广播功能
    -   [x] 测试服务端自动发现 (UDP)
    -   [x] **实现20个客户端的压力测试**

### **第二阶段: 客户端库与游戏引擎集成**

-   [ ] **客户端库 (`client_lib`)**
