syntax = "proto3";

package picoradar;

message Vector3 {
  float x = 1;
  float y = 2;
  float z = 3;
}

message Quaternion {
  float x = 1;
  float y = 2;
  float z = 3;
  float w = 4;
}

message PlayerData {
  string player_id = 1;    // 玩家唯一ID
  string scene_id = 2;     // 场景ID
  Vector3 position = 3;    // 世界坐标
  Quaternion rotation = 4; // 头部朝向
  int64 timestamp = 5;     // 时间戳 (毫秒)
}

// --- 鉴权消息 ---
message AuthRequest {
  string token = 1; // 预共享的秘密令牌
  string player_id = 2; // 客户端的玩家ID
}

message AuthResponse {
  bool success = 1;
  string message = 2;
}

// --- 玩家列表消息 ---
message PlayerList {
  repeated PlayerData players = 1; // 完整的玩家列表
}

// --- 客户端 -> 服务端 ---
message ClientToServer {
  oneof message_type {
    AuthRequest auth_request = 1;
    PlayerData player_data = 2;
  }
}

// --- 服务端 -> 客户端 ---
message ServerToClient {
  oneof message_type {
    AuthResponse auth_response = 1;
    PlayerList player_list = 2; // 完整的玩家列表
  }
}